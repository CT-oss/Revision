import random

# Title
title = r"""
______               _             _   _               _____         _   _               _____       _     
| ___ \             | |           | | (_)             |_   _|       | | (_)             |  _  |     (_)    
| |_/ /__ _ __   ___| |_ _ __ __ _| |_ _  ___  _ __     | | ___  ___| |_ _ _ __   __ _  | | | |_   _ _ ____
|  __/ _ \ '_ \ / _ \ __| '__/ _` | __| |/ _ \| '_ \    | |/ _ \/ __| __| | '_ \ / _` | | | | | | | | |_  /
| | |  __/ | | |  __/ |_| | | (_| | |_| | (_) | | | |   | |  __/\__ \ |_| | | | | (_| | \ \/' / |_| | |/ / 
\_|  \___|_| |_|\___|\__|_|  \__,_|\__|_|\___/|_| |_|   \_/\___||___/\__|_|_| |_|\__, |  \_/\_\\__,_|_/___|
                                                                                  __/ |                    
                                                                                 |___/                     
"""

# Quiz data with original and new True or False questions
quiz_data = [
    {
        "question": "What is the primary purpose of penetration testing?",
        "answer": "To identify security vulnerabilities",
        "options": [
            "To monitor network traffic",
            "To identify security vulnerabilities",
            "To enforce compliance",
            "To design secure systems"
        ],
        "explanation": "Penetration testing is a simulated attack on a system to identify security vulnerabilities that could be exploited by malicious actors."
    },
    {
        "question": "Which of the following is NOT a type of penetration testing?",
        "answer": "Financial auditing",
        "options": [
            "Network penetration testing",
            "Social engineering testing",
            "Physical penetration testing",
            "Financial auditing"
        ],
        "explanation": "Financial auditing is not a type of penetration testing. Penetration testing focuses on identifying vulnerabilities in systems, networks, or applications."
    },
    {
        "question": "Which tool is commonly used for network penetration testing?",
        "answer": "All of the above",
        "options": [
            "Nmap",
            "Wireshark",
            "Metasploit",
            "All of the above"
        ],
        "explanation": "Nmap, Wireshark, and Metasploit are all commonly used tools for network penetration testing."
    },
    {
        "question": "What does social engineering penetration testing focus on?",
        "answer": "Exploiting human psychology",
        "options": [
            "Exploiting technical vulnerabilities",
            "Exploiting human psychology",
            "Testing physical security controls",
            "Analyzing network traffic"
        ],
        "explanation": "Social engineering penetration testing focuses on exploiting human psychology to gain unauthorized access to systems or information."
    },
    {
        "question": "What is the goal of physical penetration testing?",
        "answer": "To bypass physical security controls",
        "options": [
            "To test network firewalls",
            "To bypass physical security controls",
            "To analyze employee behavior",
            "To identify software vulnerabilities"
        ],
        "explanation": "Physical penetration testing aims to bypass physical security controls, such as locks, access cards, and surveillance systems."
    },
    # New True or False Questions
    {
        "question": "Penetration testing is also known as ethical hacking.",
        "answer": "1",
        "options": ["True", "False"],
        "explanation": "Penetration testing is often referred to as ethical hacking because it involves authorized attempts to exploit vulnerabilities in a system."
    },
    {
        "question": "Network penetration testing only focuses on external network vulnerabilities.",
        "answer": "1",
        "options": ["True", "False"],
        "explanation": "Network penetration testing can be conducted both internally and externally to identify vulnerabilities in a network."
    },
    {
        "question": "Social engineering penetration testing involves technical exploits rather than human manipulation.",
        "answer": "2",
        "options": ["True", "False"],
        "explanation": "Social engineering penetration testing focuses on exploiting human psychology, not technical vulnerabilities."
    },
    {
        "question": "Physical penetration testing may involve techniques like lock picking or tailgating.",
        "answer": "1",
        "options": ["True", "False"],
        "explanation": "Physical penetration testing often involves techniques like lock picking, tailgating, or bypassing security checkpoints."
    },
    {
        "question": "Penetration testing is not necessary for regulatory compliance.",
        "answer": "2",
        "options": ["True", "False"],
        "explanation": "Penetration testing is often required for regulatory compliance with standards like PCI-DSS, HIPAA, and ISO 27001."
    }
]

def shuffle_quiz(data):
    """Shuffle questions and answer options."""
    random.shuffle(data)
    for question in data:
        random.shuffle(question["options"])
    return data

def take_quiz(data):
    """Present the quiz to the user, provide explanations, and track correct/incorrect answers."""
    score = 0
    correct_answers = []
    incorrect_answers = []

    for i, question in enumerate(data, 1):
        print(f"\nQuestion {i}: {question['question']}")
        for j, option in enumerate(question['options'], 1):
            print(f"{j}. {option}")
        user_answer = input("Your answer (enter the number): ")
        if question['options'][int(user_answer) - 1].split(".")[0] == question['answer']:
            print("Correct!")
            print(f"Explanation: {question['explanation']}\n")
            score += 1
            correct_answers.append(question['question'])
        else:
            print(f"Wrong! The correct answer is: {question['answer']}")
            print(f"Explanation: {question['explanation']}\n")
            incorrect_answers.append(question['question'])

    print(f"\nYour final score is {score}/{len(data)}")

    # Display revision feedback
    if incorrect_answers:
        print("\nHere are the questions you got wrong (revise these topics):")
        for question in incorrect_answers:
            print(f"- {question}")
    else:
        print("\nGreat job! You answered all questions correctly.")

    # Ask if the user wants to retake the quiz
    retake = input("\nWould you like to retake the quiz? (y/n): ").strip().lower()
    if retake == 'y':
        take_quiz(shuffle_quiz(quiz_data))
    else:
        print("\nThank you for taking the quiz. Goodbye!")

if __name__ == "__main__":
    print(title)
    print("Welcome to the Penetration Testing Quiz!\n")
    shuffled_quiz = shuffle_quiz(quiz_data)
    take_quiz(shuffled_quiz)